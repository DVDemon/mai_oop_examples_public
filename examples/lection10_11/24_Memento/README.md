# Пример: Паттерн Memento (Хранитель)

## Описание

Данный пример демонстрирует применение паттерна **Memento (Хранитель)** - сохранение и восстановление состояния объекта без нарушения инкапсуляции.

## Суть примера

### Компоненты паттерна

**Memento (Хранитель):**
```cpp
struct Memento {
    std::vector<std::string> state;  // Сохраняет состояние
};
```

**Originator (Создатель):**
```cpp
struct Originator {
    std::stack<Memento> mementos;  // Стек снимков состояния
    
    void createMemento(...);      // Создает снимок
    std::vector<std::string> restore();  // Восстанавливает состояние
};
```

## Принцип работы

1. **Создание снимка** - перед изменением состояния вызывается `createMemento()`, который сохраняет текущее состояние в стек
2. **Изменение состояния** - объект изменяется (добавление/удаление гостей)
3. **Восстановление** - метод `restore()` возвращает предыдущее состояние из стека (реализация undo)

## Структура паттерна

```
┌─────────────────────────────────────────────────────────┐
│                    Memento Pattern                       │
└─────────────────────────────────────────────────────────┘

    ┌──────────────┐
    │  Originator  │
    │              │
    │ +createMemento()  ────► ┌──────────┐
    │ +restore()        ◄────  │ Memento  │
    │                  │       │          │
    │ [состояние]      │       │ [state]  │
    └──────────────────┘       └──────────┘
         │
         │ управляет стеком
         ▼
    ┌──────────┐
    │  Stack   │
    │ Memento  │
    └──────────┘
```

## Преимущества

- **Инкапсуляция** - состояние сохраняется без раскрытия внутренней структуры
- **Откат изменений** - возможность вернуться к предыдущему состоянию
- **История состояний** - стек позволяет хранить несколько снимков
- **Разделение ответственности** - Originator управляет своими снимками

## Применение

Паттерн Memento полезен когда:
- Нужна возможность отмены операций (undo/redo)
- Требуется сохранять состояние без нарушения инкапсуляции
- Необходимо создавать снимки состояния объекта
- Нужна история изменений для отката

## Особенности реализации

В данном примере используется упрощенная версия:
- `Originator` сам управляет своими `Memento` через стек
- Нет отдельного класса `Caretaker` (опекуна) для управления снимками
- Используется стек для реализации LIFO (последний вошел - первый вышел) - подходит для undo

## Пример использования

```
1. Добавить гостя → createMemento() → изменение → состояние сохранено
2. Удалить гостя → createMemento() → изменение → состояние сохранено
3. Undo → restore() → возврат к предыдущему состоянию
```

