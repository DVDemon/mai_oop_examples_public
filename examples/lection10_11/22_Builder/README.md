# Пример: Паттерн Builder (Строитель)

## Описание

Данный пример демонстрирует применение паттерна **Builder (Строитель)** - пошаговое создание сложного объекта с валидацией и обеспечением инвариантов.

## Суть примера

### Проблема сложного конструктора
Класс `Tariff` имеет сложный конструктор с инвариантами:
- Размеры векторов `amount` и `discount` должны совпадать
- Значения в `amount` должны быть отсортированы
- Значения в `amount` должны быть уникальны

### Решение через Builder
```cpp
class TariffBuilder {
    void add_discount(double subtotal_, int discount_);
    Tariff build();  // Создает объект с валидацией
};
```

## Принцип работы

1. **Пошаговое построение** - объект создается через последовательность вызовов `add_discount()`
2. **Автоматическая валидация** - `std::map` обеспечивает сортировку и уникальность ключей
3. **Финальное создание** - метод `build()` создает объект `Tariff` с гарантией инвариантов

## Преимущества

- **Упрощение создания** - не нужно вручную создавать и сортировать векторы
- **Валидация** - инварианты проверяются автоматически
- **Читаемость** - пошаговое построение более понятно, чем сложный конструктор
- **Гибкость** - можно добавлять скидки в любом порядке

## Сравнение

**Без Builder:**
```cpp
// Нужно вручную создавать векторы, сортировать, проверять уникальность
Tariff t({1000, 10000, 20000}, {10, 15, 20});
```

**С Builder:**
```cpp
// Простое пошаговое построение
builder.add_discount(1000, 10);
builder.add_discount(20000, 20);
builder.add_discount(10000, 15);
auto t = builder.build();
```

## Применение

Паттерн Builder полезен когда:
- Объект имеет сложный конструктор с множеством параметров
- Необходимо обеспечить инварианты при создании
- Нужна валидация данных перед созданием объекта
- Требуется пошаговое построение сложного объекта

