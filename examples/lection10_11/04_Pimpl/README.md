# Пример: Паттерн Pimpl (Pointer to Implementation)

## Описание

Данный пример демонстрирует применение паттерна **Pimpl (Pointer to Implementation)** для защиты инкапсуляции и скрытия деталей реализации.

## Суть примера

В отличие от примера `03_Pimpl`, где приватные поля можно было изменить через небезопасное приведение указателя, здесь:

- **Детали реализации** вынесены в структуру `PaymentMachineImpl`, определенную только в файле реализации
- **Заголовочный файл** содержит только forward declaration и указатель `pimpl`
- **Приватные поля** (`balance`, `account_number`) недоступны извне, так как они находятся в отдельной структуре в куче

## Структура

- `PaymentMachine.h` - публичный интерфейс с указателем на реализацию
- `PaymentMachine.cpp` - определение структуры `PaymentMachineImpl` и реализация методов
- `main.cpp` - использование класса (небезопасный доступ закомментирован, так как теперь невозможен)

## Преимущества Pimpl

- **Защита инкапсуляции** - невозможно получить доступ к приватным полям через указатели
- **Скрытие деталей** - изменения в реализации не требуют перекомпиляции клиентского кода
- **Снижение зависимостей** - заголовочный файл не содержит зависимостей от деталей реализации

## Сравнение

Сравните с примером `03_Pimpl`, чтобы увидеть разницу в уровне защиты инкапсуляции.

