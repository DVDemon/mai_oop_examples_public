# Пример: Проблема смешивания команд и запросов (CQRS)

## Описание

Данный пример демонстрирует проблему **смешивания команд (Command) и запросов (Query)** в одном методе, что нарушает принцип разделения ответственности.

## Суть примера

В классе `MessageStore` показаны методы, которые нарушают принцип **CQRS (Command Query Responsibility Segregation)**:

### Проблема 1: Команда возвращает значение
```cpp
const std::string Save(size_t index, const char* msg) {
    // ... изменяет состояние ...
    return messages[index];  // Почему команда возвращает значение?
}
```

### Проблема 2: Запрос имеет побочный эффект
```cpp
void Read(size_t index) {
    std::cout << "Msg:" << messages[index] << std::endl;  // Побочный эффект?
}
```

## Принцип CQRS

**Команды (Commands)** - изменяют состояние, не должны возвращать данные:
- Могут возвращать только подтверждение успеха/неудачи
- Не должны возвращать измененные данные

**Запросы (Queries)** - читают состояние, не должны его изменять:
- Не должны иметь побочных эффектов
- Должны быть идемпотентными (многократный вызов дает тот же результат)

## Проблемы текущей реализации

- **Нарушение разделения ответственности** - команда выполняет роль запроса
- **Сложность тестирования** - методы делают несколько вещей одновременно
- **Неясность намерений** - непонятно, что делает метод (изменяет или читает?)

## Решение

Сравните с примером `08_Cqrs`, где показано правильное разделение команд и запросов.

