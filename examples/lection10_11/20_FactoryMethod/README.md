# Пример: Паттерн Factory Method (Фабричный метод)

## Описание

Данный пример демонстрирует применение паттерна **Factory Method (Фабричный метод)** - инкапсуляцию создания объектов через специальный метод, который возвращает абстракцию.

## Суть примера

### Абстракция
```cpp
struct IStorage {
    virtual void open() = 0;
    virtual void execute_query() = 0;
    virtual void close() = 0;
};
```

### Конкретные реализации
- `MysqlStorage` - реализация для MySQL
- `PostgresStorage` - реализация для PostgreSQL

### Фабрика
```cpp
struct Factory {
    IStorage* factory_method(const Storage& storage) {
        // Создает нужный объект в зависимости от параметра
        switch (storage) {
            case Storage::mysql: return new MysqlStorage();
            case Storage::postgres: return new PostgresStorage();
        }
    }
};
```

## Принцип работы

1. **Инкапсуляция создания** - логика создания объектов скрыта в фабрике
2. **Работа с абстракцией** - клиентский код работает с `IStorage*`, не зная конкретного типа
3. **Централизованное управление** - все создания объектов происходят через фабрику

## Преимущества

- **Инкапсуляция** - детали создания объектов скрыты от клиента
- **Гибкость** - легко добавить новые типы хранилищ
- **Соблюдение DIP** - клиент зависит от абстракции `IStorage`, а не от конкретных классов
- **Централизация** - логика выбора типа объекта в одном месте

## Применение

Паттерн Factory Method полезен когда:
- Необходимо создавать объекты без указания точного класса
- Нужно инкапсулировать логику создания объектов
- Требуется расширяемость - возможность добавлять новые типы

## Сравнение

Это упрощенная версия Factory Method. В более сложных случаях фабрика может быть абстрактной, а конкретные фабрики создавать конкретные объекты.

