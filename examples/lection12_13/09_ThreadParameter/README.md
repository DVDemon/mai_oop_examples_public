# Пример: Передача параметров в потоки

## Описание

Данный пример демонстрирует **различные способы передачи параметров** в потоки: копирование, перемещение и передача по ссылке.

## Суть примера

### Три способа передачи объекта

#### 1. Копирование (Copy)

```cpp
std::thread my_thread1(cls, "Hello world!");
```

Объект **копируется** в поток:
- Вызывается **copy constructor**
- В потоке создается копия объекта
- Оригинальный объект остается доступным

#### 2. Перемещение (Move)

```cpp
std::thread my_thread2(std::move(cls), "Hello world!");
```

Объект **перемещается** в поток:
- Вызывается **move constructor**
- Владение объектом передается потоку
- Оригинальный объект становится невалидным

#### 3. По ссылке (Reference)

```cpp
std::thread my_thread3(std::ref(cls), "Hello world!");
```

Объект передается **по ссылке**:
- **Не создается копия**
- Поток работает с оригинальным объектом
- Требуется синхронизация доступа

## Принцип работы

### std::thread и параметры

`std::thread` принимает:
1. **Вызываемый объект** (функция, лямбда, функтор)
2. **Аргументы** для вызова

```cpp
std::thread thread_object(callable, arg1, arg2, ...);
```

### Функтор (Functor)

В примере `MyClass` - это функтор:
```cpp
void operator()(const char* param) {
    std::cout << param << std::endl;
}
```

Объект можно вызывать как функцию, что позволяет использовать его в потоке.

## Сравнение способов передачи

| Способ | Конструктор | Копия? | Владение | Синхронизация |
|--------|-------------|--------|----------|---------------|
| **Copy** | Copy constructor | Да | Оригинал + копия | Не нужна |
| **Move** | Move constructor | Нет | Только в потоке | Не нужна |
| **Ref** | Нет | Нет | Оригинал | **Нужна!** |

## Важные моменты

### Копирование

- **Безопасно** - каждый поток имеет свою копию
- **Дорого** - создание копии может быть затратным
- **Независимость** - изменения в копии не влияют на оригинал

### Перемещение

- **Эффективно** - нет копирования
- **Однократное использование** - объект нельзя использовать после перемещения
- **Подходит для** - больших объектов, которые не нужны в основном потоке

### Передача по ссылке

- **Эффективно** - нет копирования
- **Опасно** - нужна синхронизация доступа
- **Требует** - использования мьютексов или других механизмов синхронизации

## Когда использовать

### Copy
- Маленькие объекты
- Нужна независимая копия в потоке
- Объект должен остаться доступным в основном потоке

### Move
- Большие объекты
- Объект больше не нужен в основном потоке
- Нужна эффективность

### Ref
- Объект должен быть общим для потоков
- Есть механизмы синхронизации
- Нужно избежать копирования

## Связь с лямбда-выражениями

Лямбды можно передавать в потоки:

```cpp
auto lambda = [](int x) { std::cout << x << std::endl; };
std::thread t(lambda, 42);
```

Лямбды автоматически захватывают переменные, что делает их удобными для потоков.

## Связь с предыдущими примерами

- `08_Thread` - базовое создание потоков
- `09_ThreadParameter` - передача параметров в потоки
- `10_ScopedThread` - безопасное управление потоками (следующий пример)

Это демонстрирует важность правильного выбора способа передачи данных в многопоточных программах.

